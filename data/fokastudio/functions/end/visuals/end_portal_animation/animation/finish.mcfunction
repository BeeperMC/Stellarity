particle end_rod ~ ~ ~ 0 0 0 0.15 50

playsound minecraft:item.trident.thunder block @a ~ ~ ~ 3 0.75
playsound minecraft:block.beacon.activate block @a ~ ~ ~ 1000 0.75
playsound block.end_portal.spawn block @a ~ ~ ~ 1000 1

fill ~2 ~ ~2 ~-2 ~ ~-2 end_portal_frame[eye=false,facing=north] replace end_portal_frame[eye=true,facing=north]
fill ~2 ~ ~2 ~-2 ~ ~-2 end_portal_frame[eye=false,facing=east] replace end_portal_frame[eye=true,facing=east]
fill ~2 ~ ~2 ~-2 ~ ~-2 end_portal_frame[eye=false,facing=south] replace end_portal_frame[eye=true,facing=south]
fill ~2 ~ ~2 ~-2 ~ ~-2 end_portal_frame[eye=false,facing=west] replace end_portal_frame[eye=true,facing=west]
fill ~1 ~ ~1 ~-1 ~ ~-1 end_portal replace air

summon marker ~ ~2 ~ {Tags:["foka.end_portal"]}

execute as @e[type=marker,limit=1,sort=nearest,tag=foka.end_portal] at @s rotated ~0 ~ run summon armor_stand ^ ^-2 ^5 {NoGravity:1b,Tags:["foka.end_portal_animation.eye_1","foka.end_portal_animation.eye"],Small:1b,Marker:1b,Invisible:1b,ArmorItems:[{},{},{},{id:"player_head",Count:1b,tag:{SkullOwner:{Id:[I;907160796,1821854615,-1727336627,-176309982],Properties:{textures:[{Value:"eyJ0ZXh0dXJlcyI6eyJTS0lOIjp7InVybCI6Imh0dHA6Ly90ZXh0dXJlcy5taW5lY3JhZnQubmV0L3RleHR1cmUvZGFhOGZjOGRlNjQxN2I0OGQ0OGM4MGI0NDNjZjUzMjZlM2Q5ZGE0ZGJlOWIyNWZjZDQ5NTQ5ZDk2MTY4ZmMwIn19fQ=="}]}}}}]}
execute as @e[type=marker,limit=1,sort=nearest,tag=foka.end_portal] at @s rotated ~30 ~ run summon armor_stand ^ ^-2 ^5 {NoGravity:1b,Tags:["foka.end_portal_animation.eye_2","foka.end_portal_animation.eye"],Small:1b,Marker:1b,Invisible:1b,ArmorItems:[{},{},{},{id:"player_head",Count:1b,tag:{SkullOwner:{Id:[I;907160796,1821854615,-1727336627,-176309982],Properties:{textures:[{Value:"eyJ0ZXh0dXJlcyI6eyJTS0lOIjp7InVybCI6Imh0dHA6Ly90ZXh0dXJlcy5taW5lY3JhZnQubmV0L3RleHR1cmUvZGFhOGZjOGRlNjQxN2I0OGQ0OGM4MGI0NDNjZjUzMjZlM2Q5ZGE0ZGJlOWIyNWZjZDQ5NTQ5ZDk2MTY4ZmMwIn19fQ=="}]}}}}]}
execute as @e[type=marker,limit=1,sort=nearest,tag=foka.end_portal] at @s rotated ~60 ~ run summon armor_stand ^ ^-2 ^5 {NoGravity:1b,Tags:["foka.end_portal_animation.eye_3","foka.end_portal_animation.eye"],Small:1b,Marker:1b,Invisible:1b,ArmorItems:[{},{},{},{id:"player_head",Count:1b,tag:{SkullOwner:{Id:[I;907160796,1821854615,-1727336627,-176309982],Properties:{textures:[{Value:"eyJ0ZXh0dXJlcyI6eyJTS0lOIjp7InVybCI6Imh0dHA6Ly90ZXh0dXJlcy5taW5lY3JhZnQubmV0L3RleHR1cmUvZGFhOGZjOGRlNjQxN2I0OGQ0OGM4MGI0NDNjZjUzMjZlM2Q5ZGE0ZGJlOWIyNWZjZDQ5NTQ5ZDk2MTY4ZmMwIn19fQ=="}]}}}}]}
execute as @e[type=marker,limit=1,sort=nearest,tag=foka.end_portal] at @s rotated ~90 ~ run summon armor_stand ^ ^-2 ^5 {NoGravity:1b,Tags:["foka.end_portal_animation.eye_4","foka.end_portal_animation.eye"],Small:1b,Marker:1b,Invisible:1b,ArmorItems:[{},{},{},{id:"player_head",Count:1b,tag:{SkullOwner:{Id:[I;907160796,1821854615,-1727336627,-176309982],Properties:{textures:[{Value:"eyJ0ZXh0dXJlcyI6eyJTS0lOIjp7InVybCI6Imh0dHA6Ly90ZXh0dXJlcy5taW5lY3JhZnQubmV0L3RleHR1cmUvZGFhOGZjOGRlNjQxN2I0OGQ0OGM4MGI0NDNjZjUzMjZlM2Q5ZGE0ZGJlOWIyNWZjZDQ5NTQ5ZDk2MTY4ZmMwIn19fQ=="}]}}}}]}
execute as @e[type=marker,limit=1,sort=nearest,tag=foka.end_portal] at @s rotated ~120 ~ run summon armor_stand ^ ^-2 ^5 {NoGravity:1b,Tags:["foka.end_portal_animation.eye_5","foka.end_portal_animation.eye"],Small:1b,Marker:1b,Invisible:1b,ArmorItems:[{},{},{},{id:"player_head",Count:1b,tag:{SkullOwner:{Id:[I;907160796,1821854615,-1727336627,-176309982],Properties:{textures:[{Value:"eyJ0ZXh0dXJlcyI6eyJTS0lOIjp7InVybCI6Imh0dHA6Ly90ZXh0dXJlcy5taW5lY3JhZnQubmV0L3RleHR1cmUvZGFhOGZjOGRlNjQxN2I0OGQ0OGM4MGI0NDNjZjUzMjZlM2Q5ZGE0ZGJlOWIyNWZjZDQ5NTQ5ZDk2MTY4ZmMwIn19fQ=="}]}}}}]}
execute as @e[type=marker,limit=1,sort=nearest,tag=foka.end_portal] at @s rotated ~150 ~ run summon armor_stand ^ ^-2 ^5 {NoGravity:1b,Tags:["foka.end_portal_animation.eye_6","foka.end_portal_animation.eye"],Small:1b,Marker:1b,Invisible:1b,ArmorItems:[{},{},{},{id:"player_head",Count:1b,tag:{SkullOwner:{Id:[I;907160796,1821854615,-1727336627,-176309982],Properties:{textures:[{Value:"eyJ0ZXh0dXJlcyI6eyJTS0lOIjp7InVybCI6Imh0dHA6Ly90ZXh0dXJlcy5taW5lY3JhZnQubmV0L3RleHR1cmUvZGFhOGZjOGRlNjQxN2I0OGQ0OGM4MGI0NDNjZjUzMjZlM2Q5ZGE0ZGJlOWIyNWZjZDQ5NTQ5ZDk2MTY4ZmMwIn19fQ=="}]}}}}]}
execute as @e[type=marker,limit=1,sort=nearest,tag=foka.end_portal] at @s rotated ~180 ~ run summon armor_stand ^ ^-2 ^5 {NoGravity:1b,Tags:["foka.end_portal_animation.eye_7","foka.end_portal_animation.eye"],Small:1b,Marker:1b,Invisible:1b,ArmorItems:[{},{},{},{id:"player_head",Count:1b,tag:{SkullOwner:{Id:[I;907160796,1821854615,-1727336627,-176309982],Properties:{textures:[{Value:"eyJ0ZXh0dXJlcyI6eyJTS0lOIjp7InVybCI6Imh0dHA6Ly90ZXh0dXJlcy5taW5lY3JhZnQubmV0L3RleHR1cmUvZGFhOGZjOGRlNjQxN2I0OGQ0OGM4MGI0NDNjZjUzMjZlM2Q5ZGE0ZGJlOWIyNWZjZDQ5NTQ5ZDk2MTY4ZmMwIn19fQ=="}]}}}}]}
execute as @e[type=marker,limit=1,sort=nearest,tag=foka.end_portal] at @s rotated ~210 ~ run summon armor_stand ^ ^-2 ^5 {NoGravity:1b,Tags:["foka.end_portal_animation.eye_8","foka.end_portal_animation.eye"],Small:1b,Marker:1b,Invisible:1b,ArmorItems:[{},{},{},{id:"player_head",Count:1b,tag:{SkullOwner:{Id:[I;907160796,1821854615,-1727336627,-176309982],Properties:{textures:[{Value:"eyJ0ZXh0dXJlcyI6eyJTS0lOIjp7InVybCI6Imh0dHA6Ly90ZXh0dXJlcy5taW5lY3JhZnQubmV0L3RleHR1cmUvZGFhOGZjOGRlNjQxN2I0OGQ0OGM4MGI0NDNjZjUzMjZlM2Q5ZGE0ZGJlOWIyNWZjZDQ5NTQ5ZDk2MTY4ZmMwIn19fQ=="}]}}}}]}
execute as @e[type=marker,limit=1,sort=nearest,tag=foka.end_portal] at @s rotated ~240 ~ run summon armor_stand ^ ^-2 ^5 {NoGravity:1b,Tags:["foka.end_portal_animation.eye_9","foka.end_portal_animation.eye"],Small:1b,Marker:1b,Invisible:1b,ArmorItems:[{},{},{},{id:"player_head",Count:1b,tag:{SkullOwner:{Id:[I;907160796,1821854615,-1727336627,-176309982],Properties:{textures:[{Value:"eyJ0ZXh0dXJlcyI6eyJTS0lOIjp7InVybCI6Imh0dHA6Ly90ZXh0dXJlcy5taW5lY3JhZnQubmV0L3RleHR1cmUvZGFhOGZjOGRlNjQxN2I0OGQ0OGM4MGI0NDNjZjUzMjZlM2Q5ZGE0ZGJlOWIyNWZjZDQ5NTQ5ZDk2MTY4ZmMwIn19fQ=="}]}}}}]}
execute as @e[type=marker,limit=1,sort=nearest,tag=foka.end_portal] at @s rotated ~270 ~ run summon armor_stand ^ ^-2 ^5 {NoGravity:1b,Tags:["foka.end_portal_animation.eye_10","foka.end_portal_animation.eye"],Small:1b,Marker:1b,Invisible:1b,ArmorItems:[{},{},{},{id:"player_head",Count:1b,tag:{SkullOwner:{Id:[I;907160796,1821854615,-1727336627,-176309982],Properties:{textures:[{Value:"eyJ0ZXh0dXJlcyI6eyJTS0lOIjp7InVybCI6Imh0dHA6Ly90ZXh0dXJlcy5taW5lY3JhZnQubmV0L3RleHR1cmUvZGFhOGZjOGRlNjQxN2I0OGQ0OGM4MGI0NDNjZjUzMjZlM2Q5ZGE0ZGJlOWIyNWZjZDQ5NTQ5ZDk2MTY4ZmMwIn19fQ=="}]}}}}]}
execute as @e[type=marker,limit=1,sort=nearest,tag=foka.end_portal] at @s rotated ~300 ~ run summon armor_stand ^ ^-2 ^5 {NoGravity:1b,Tags:["foka.end_portal_animation.eye_11","foka.end_portal_animation.eye"],Small:1b,Marker:1b,Invisible:1b,ArmorItems:[{},{},{},{id:"player_head",Count:1b,tag:{SkullOwner:{Id:[I;907160796,1821854615,-1727336627,-176309982],Properties:{textures:[{Value:"eyJ0ZXh0dXJlcyI6eyJTS0lOIjp7InVybCI6Imh0dHA6Ly90ZXh0dXJlcy5taW5lY3JhZnQubmV0L3RleHR1cmUvZGFhOGZjOGRlNjQxN2I0OGQ0OGM4MGI0NDNjZjUzMjZlM2Q5ZGE0ZGJlOWIyNWZjZDQ5NTQ5ZDk2MTY4ZmMwIn19fQ=="}]}}}}]}
execute as @e[type=marker,limit=1,sort=nearest,tag=foka.end_portal] at @s rotated ~330 ~ run summon armor_stand ^ ^-2 ^5 {NoGravity:1b,Tags:["foka.end_portal_animation.eye_12","foka.end_portal_animation.eye"],Small:1b,Marker:1b,Invisible:1b,ArmorItems:[{},{},{},{id:"player_head",Count:1b,tag:{SkullOwner:{Id:[I;907160796,1821854615,-1727336627,-176309982],Properties:{textures:[{Value:"eyJ0ZXh0dXJlcyI6eyJTS0lOIjp7InVybCI6Imh0dHA6Ly90ZXh0dXJlcy5taW5lY3JhZnQubmV0L3RleHR1cmUvZGFhOGZjOGRlNjQxN2I0OGQ0OGM4MGI0NDNjZjUzMjZlM2Q5ZGE0ZGJlOWIyNWZjZDQ5NTQ5ZDk2MTY4ZmMwIn19fQ=="}]}}}}]}

advancement grant @a[distance=..32] only fokastudio:end/stronghold/the_deed_is_done

kill @s
