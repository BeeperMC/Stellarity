particle end_rod ~ ~ ~ 0 0 0 0.15 50

playsound minecraft:item.trident.thunder block @a ~ ~ ~ 3 0.75
playsound minecraft:block.beacon.activate block @a ~ ~ ~ 1000 0.75
playsound block.end_portal.spawn block @a ~ ~ ~ 1000 1

fill ~2 ~ ~2 ~-2 ~ ~-2 end_portal_frame[eye=false,facing=north] replace end_portal_frame[eye=true,facing=north]
fill ~2 ~ ~2 ~-2 ~ ~-2 end_portal_frame[eye=false,facing=east] replace end_portal_frame[eye=true,facing=east]
fill ~2 ~ ~2 ~-2 ~ ~-2 end_portal_frame[eye=false,facing=south] replace end_portal_frame[eye=true,facing=south]
fill ~2 ~ ~2 ~-2 ~ ~-2 end_portal_frame[eye=false,facing=west] replace end_portal_frame[eye=true,facing=west]
fill ~1 ~ ~1 ~-1 ~ ~-1 end_portal replace air

summon marker ~ ~2 ~ {Tags:["foka.end_portal_animation.eye_1","foka.end_portal_animation.marker"],Rotation:[0f, 0f]}
summon marker ~ ~2 ~ {Tags:["foka.end_portal_animation.eye_2","foka.end_portal_animation.marker"],Rotation:[45f, 0f]}
summon marker ~ ~2 ~ {Tags:["foka.end_portal_animation.eye_3","foka.end_portal_animation.marker"],Rotation:[-45f, 0f]}
summon marker ~ ~2 ~ {Tags:["foka.end_portal_animation.eye_4","foka.end_portal_animation.marker"],Rotation:[135f, 0f]}
summon marker ~ ~2 ~ {Tags:["foka.end_portal_animation.eye_5","foka.end_portal_animation.marker"],Rotation:[-135f, 0f]}
summon marker ~ ~2 ~ {Tags:["foka.end_portal_animation.eye_6","foka.end_portal_animation.marker"],Rotation:[180f, 0f]}

summon marker ~ ~2 ~ {Tags:["foka.end_portal_animation.fill_stopper"]}

execute as @e[type=marker,limit=1,sort=nearest,tag=foka.end_portal_animation.eye_1] at @s run summon armor_stand ^ ^-1.85 ^3 {NoGravity:1b,Tags:["foka.end_portal_animation.eye_1_1","foka.end_portal_animation.eye_poof_schedule","foka.end_portal_animation.as"],Small:1b,Marker:1b,Invisible:1b,ArmorItems:[{},{},{},{id:"player_head",Count:1b,tag:{SkullOwner:{Id:[I;907160796,1821854615,-1727336627,-176309982],Properties:{textures:[{Value:"eyJ0ZXh0dXJlcyI6eyJTS0lOIjp7InVybCI6Imh0dHA6Ly90ZXh0dXJlcy5taW5lY3JhZnQubmV0L3RleHR1cmUvZGFhOGZjOGRlNjQxN2I0OGQ0OGM4MGI0NDNjZjUzMjZlM2Q5ZGE0ZGJlOWIyNWZjZDQ5NTQ5ZDk2MTY4ZmMwIn19fQ=="}]}}}}]}
execute as @e[type=marker,limit=1,sort=nearest,tag=foka.end_portal_animation.eye_1] at @s run summon armor_stand ^ ^-1.85 ^-3 {NoGravity:1b,Tags:["foka.end_portal_animation.eye_1_2","foka.end_portal_animation.eye_poof_schedule","foka.end_portal_animation.as"],Small:1b,Marker:1b,Invisible:1b,ArmorItems:[{},{},{},{id:"player_head",Count:1b,tag:{SkullOwner:{Id:[I;907160796,1821854615,-1727336627,-176309982],Properties:{textures:[{Value:"eyJ0ZXh0dXJlcyI6eyJTS0lOIjp7InVybCI6Imh0dHA6Ly90ZXh0dXJlcy5taW5lY3JhZnQubmV0L3RleHR1cmUvZGFhOGZjOGRlNjQxN2I0OGQ0OGM4MGI0NDNjZjUzMjZlM2Q5ZGE0ZGJlOWIyNWZjZDQ5NTQ5ZDk2MTY4ZmMwIn19fQ=="}]}}}}]}
execute as @e[type=marker,limit=1,sort=nearest,tag=foka.end_portal_animation.eye_2] at @s run summon armor_stand ^ ^-1.85 ^3.5 {NoGravity:1b,Tags:["foka.end_portal_animation.eye_2_1","foka.end_portal_animation.eye_poof_schedule","foka.end_portal_animation.as"],Small:1b,Marker:1b,Invisible:1b,ArmorItems:[{},{},{},{id:"player_head",Count:1b,tag:{SkullOwner:{Id:[I;907160796,1821854615,-1727336627,-176309982],Properties:{textures:[{Value:"eyJ0ZXh0dXJlcyI6eyJTS0lOIjp7InVybCI6Imh0dHA6Ly90ZXh0dXJlcy5taW5lY3JhZnQubmV0L3RleHR1cmUvZGFhOGZjOGRlNjQxN2I0OGQ0OGM4MGI0NDNjZjUzMjZlM2Q5ZGE0ZGJlOWIyNWZjZDQ5NTQ5ZDk2MTY4ZmMwIn19fQ=="}]}}}}]}
execute as @e[type=marker,limit=1,sort=nearest,tag=foka.end_portal_animation.eye_2] at @s run summon armor_stand ^ ^-1.85 ^-3.5 {NoGravity:1b,Tags:["foka.end_portal_animation.eye_2_2","foka.end_portal_animation.eye_poof_schedule","foka.end_portal_animation.as"],Small:1b,Marker:1b,Invisible:1b,ArmorItems:[{},{},{},{id:"player_head",Count:1b,tag:{SkullOwner:{Id:[I;907160796,1821854615,-1727336627,-176309982],Properties:{textures:[{Value:"eyJ0ZXh0dXJlcyI6eyJTS0lOIjp7InVybCI6Imh0dHA6Ly90ZXh0dXJlcy5taW5lY3JhZnQubmV0L3RleHR1cmUvZGFhOGZjOGRlNjQxN2I0OGQ0OGM4MGI0NDNjZjUzMjZlM2Q5ZGE0ZGJlOWIyNWZjZDQ5NTQ5ZDk2MTY4ZmMwIn19fQ=="}]}}}}]}
execute as @e[type=marker,limit=1,sort=nearest,tag=foka.end_portal_animation.eye_3] at @s run summon armor_stand ^ ^-1.85 ^4 {NoGravity:1b,Tags:["foka.end_portal_animation.eye_3_1","foka.end_portal_animation.eye_poof_schedule","foka.end_portal_animation.as"],Small:1b,Marker:1b,Invisible:1b,ArmorItems:[{},{},{},{id:"player_head",Count:1b,tag:{SkullOwner:{Id:[I;907160796,1821854615,-1727336627,-176309982],Properties:{textures:[{Value:"eyJ0ZXh0dXJlcyI6eyJTS0lOIjp7InVybCI6Imh0dHA6Ly90ZXh0dXJlcy5taW5lY3JhZnQubmV0L3RleHR1cmUvZGFhOGZjOGRlNjQxN2I0OGQ0OGM4MGI0NDNjZjUzMjZlM2Q5ZGE0ZGJlOWIyNWZjZDQ5NTQ5ZDk2MTY4ZmMwIn19fQ=="}]}}}}]}
execute as @e[type=marker,limit=1,sort=nearest,tag=foka.end_portal_animation.eye_3] at @s run summon armor_stand ^ ^-1.85 ^-4 {NoGravity:1b,Tags:["foka.end_portal_animation.eye_3_2","foka.end_portal_animation.eye_poof_schedule","foka.end_portal_animation.as"],Small:1b,Marker:1b,Invisible:1b,ArmorItems:[{},{},{},{id:"player_head",Count:1b,tag:{SkullOwner:{Id:[I;907160796,1821854615,-1727336627,-176309982],Properties:{textures:[{Value:"eyJ0ZXh0dXJlcyI6eyJTS0lOIjp7InVybCI6Imh0dHA6Ly90ZXh0dXJlcy5taW5lY3JhZnQubmV0L3RleHR1cmUvZGFhOGZjOGRlNjQxN2I0OGQ0OGM4MGI0NDNjZjUzMjZlM2Q5ZGE0ZGJlOWIyNWZjZDQ5NTQ5ZDk2MTY4ZmMwIn19fQ=="}]}}}}]}
execute as @e[type=marker,limit=1,sort=nearest,tag=foka.end_portal_animation.eye_4] at @s run summon armor_stand ^ ^-1.85 ^4.5 {NoGravity:1b,Tags:["foka.end_portal_animation.eye_4_1","foka.end_portal_animation.eye_poof_schedule","foka.end_portal_animation.as"],Small:1b,Marker:1b,Invisible:1b,ArmorItems:[{},{},{},{id:"player_head",Count:1b,tag:{SkullOwner:{Id:[I;907160796,1821854615,-1727336627,-176309982],Properties:{textures:[{Value:"eyJ0ZXh0dXJlcyI6eyJTS0lOIjp7InVybCI6Imh0dHA6Ly90ZXh0dXJlcy5taW5lY3JhZnQubmV0L3RleHR1cmUvZGFhOGZjOGRlNjQxN2I0OGQ0OGM4MGI0NDNjZjUzMjZlM2Q5ZGE0ZGJlOWIyNWZjZDQ5NTQ5ZDk2MTY4ZmMwIn19fQ=="}]}}}}]}
execute as @e[type=marker,limit=1,sort=nearest,tag=foka.end_portal_animation.eye_4] at @s run summon armor_stand ^ ^-1.85 ^-4.5 {NoGravity:1b,Tags:["foka.end_portal_animation.eye_4_2","foka.end_portal_animation.eye_poof_schedule","foka.end_portal_animation.as"],Small:1b,Marker:1b,Invisible:1b,ArmorItems:[{},{},{},{id:"player_head",Count:1b,tag:{SkullOwner:{Id:[I;907160796,1821854615,-1727336627,-176309982],Properties:{textures:[{Value:"eyJ0ZXh0dXJlcyI6eyJTS0lOIjp7InVybCI6Imh0dHA6Ly90ZXh0dXJlcy5taW5lY3JhZnQubmV0L3RleHR1cmUvZGFhOGZjOGRlNjQxN2I0OGQ0OGM4MGI0NDNjZjUzMjZlM2Q5ZGE0ZGJlOWIyNWZjZDQ5NTQ5ZDk2MTY4ZmMwIn19fQ=="}]}}}}]}
execute as @e[type=marker,limit=1,sort=nearest,tag=foka.end_portal_animation.eye_5] at @s run summon armor_stand ^ ^-1.85 ^5 {NoGravity:1b,Tags:["foka.end_portal_animation.eye_5_1","foka.end_portal_animation.eye_poof_schedule","foka.end_portal_animation.as"],Small:1b,Marker:1b,Invisible:1b,ArmorItems:[{},{},{},{id:"player_head",Count:1b,tag:{SkullOwner:{Id:[I;907160796,1821854615,-1727336627,-176309982],Properties:{textures:[{Value:"eyJ0ZXh0dXJlcyI6eyJTS0lOIjp7InVybCI6Imh0dHA6Ly90ZXh0dXJlcy5taW5lY3JhZnQubmV0L3RleHR1cmUvZGFhOGZjOGRlNjQxN2I0OGQ0OGM4MGI0NDNjZjUzMjZlM2Q5ZGE0ZGJlOWIyNWZjZDQ5NTQ5ZDk2MTY4ZmMwIn19fQ=="}]}}}}]}
execute as @e[type=marker,limit=1,sort=nearest,tag=foka.end_portal_animation.eye_5] at @s run summon armor_stand ^ ^-1.85 ^-5 {NoGravity:1b,Tags:["foka.end_portal_animation.eye_5_2","foka.end_portal_animation.eye_poof_schedule","foka.end_portal_animation.as"],Small:1b,Marker:1b,Invisible:1b,ArmorItems:[{},{},{},{id:"player_head",Count:1b,tag:{SkullOwner:{Id:[I;907160796,1821854615,-1727336627,-176309982],Properties:{textures:[{Value:"eyJ0ZXh0dXJlcyI6eyJTS0lOIjp7InVybCI6Imh0dHA6Ly90ZXh0dXJlcy5taW5lY3JhZnQubmV0L3RleHR1cmUvZGFhOGZjOGRlNjQxN2I0OGQ0OGM4MGI0NDNjZjUzMjZlM2Q5ZGE0ZGJlOWIyNWZjZDQ5NTQ5ZDk2MTY4ZmMwIn19fQ=="}]}}}}]}
execute as @e[type=marker,limit=1,sort=nearest,tag=foka.end_portal_animation.eye_6] at @s run summon armor_stand ^ ^-1.85 ^5.5 {NoGravity:1b,Tags:["foka.end_portal_animation.eye_6_1","foka.end_portal_animation.eye_poof_schedule","foka.end_portal_animation.as"],Small:1b,Marker:1b,Invisible:1b,ArmorItems:[{},{},{},{id:"player_head",Count:1b,tag:{SkullOwner:{Id:[I;907160796,1821854615,-1727336627,-176309982],Properties:{textures:[{Value:"eyJ0ZXh0dXJlcyI6eyJTS0lOIjp7InVybCI6Imh0dHA6Ly90ZXh0dXJlcy5taW5lY3JhZnQubmV0L3RleHR1cmUvZGFhOGZjOGRlNjQxN2I0OGQ0OGM4MGI0NDNjZjUzMjZlM2Q5ZGE0ZGJlOWIyNWZjZDQ5NTQ5ZDk2MTY4ZmMwIn19fQ=="}]}}}}]}
execute as @e[type=marker,limit=1,sort=nearest,tag=foka.end_portal_animation.eye_6] at @s run summon armor_stand ^ ^-1.85 ^-5.5 {NoGravity:1b,Tags:["foka.end_portal_animation.eye_6_2","foka.end_portal_animation.eye_poof_schedule","foka.end_portal_animation.as"],Small:1b,Marker:1b,Invisible:1b,ArmorItems:[{},{},{},{id:"player_head",Count:1b,tag:{SkullOwner:{Id:[I;907160796,1821854615,-1727336627,-176309982],Properties:{textures:[{Value:"eyJ0ZXh0dXJlcyI6eyJTS0lOIjp7InVybCI6Imh0dHA6Ly90ZXh0dXJlcy5taW5lY3JhZnQubmV0L3RleHR1cmUvZGFhOGZjOGRlNjQxN2I0OGQ0OGM4MGI0NDNjZjUzMjZlM2Q5ZGE0ZGJlOWIyNWZjZDQ5NTQ5ZDk2MTY4ZmMwIn19fQ=="}]}}}}]}

kill @s
